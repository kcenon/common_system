# Common System - μƒμ„Έ κΈ°λ¥

**μ–Έμ–΄:** [English](FEATURES.md) | **ν•κµ­μ–΄**

μ΄ λ¬Έμ„λ” Common System ν”„λ΅μ νΈμ—μ„ μ‚¬μ© κ°€λ¥ν• λ¨λ“  κΈ°λ¥μ— λ€ν• ν¬κ΄„μ μΈ μ„Έλ¶€ μ •λ³΄λ¥Ό μ κ³µν•©λ‹λ‹¤.

---

## λ©μ°¨

- [ν•µμ‹¬ μ¥μ  λ° μ΄μ ](#ν•µμ‹¬-μ¥μ -λ°-μ΄μ )
- [ν•µμ‹¬ μ»΄ν¬λ„νΈ](#ν•µμ‹¬-μ»΄ν¬λ„νΈ)
- [ν†µν•© κΈ°λ¥](#ν†µν•©-κΈ°λ¥)
- [ν”„λ΅λ•μ… ν’μ§ κΈ°λ¥](#ν”„λ΅λ•μ…-ν’μ§-κΈ°λ¥)
- [μ¤λ¥ μ²λ¦¬ κΈ°λ°](#μ¤λ¥-μ²λ¦¬-κΈ°λ°)

---

## ν•µμ‹¬ μ¥μ  λ° μ΄μ 

### π€ **μ„±λ¥ μ°μμ„±**

common_systemμ€ μ—¬λ¬ ν•µμ‹¬ μ„¤κ³„ κ²°μ •μ„ ν†µν•΄ μ λ΅ μ¤λ²„ν—¤λ“ μ¶”μƒν™”λ¥Ό λ‹¬μ„±ν•©λ‹λ‹¤:

- **μ λ΅ μ¤λ²„ν—¤λ“ μ¶”μƒν™”**: μ»΄νμΌ νƒ€μ„ ν•΄μ„μ„ ν†µν• ν…ν”λ¦Ώ κΈ°λ° μΈν„°νμ΄μ¤λ΅ common_system μΈν„°νμ΄μ¤ μ‚¬μ©μ΄ μ§μ ‘ μ‘μ„±ν• μ½”λ“μ™€ λΉ„κµν•μ—¬ λ°νƒ€μ„ λΉ„μ©μ΄ μ—†μ
- **ν—¤λ” μ „μ© μ„¤κ³„**: λΌμ΄λΈλ¬λ¦¬ λ§ν‚Ήμ΄ ν•„μ” μ—†μ–΄ μ»΄νμΌλ¬κ°€ μµμ ν™”λ¥Ό μ„ν• μ™„μ „ν• κ°€μ‹μ„±μ„ κ°€μ§. λ” λ‚μ€ μΈλΌμ΄λ‹, λ°λ“ μ½”λ“ μ κ±°, λ§ν¬ νƒ€μ„ μµμ ν™” κ°€λ¥
- **μΊμ‹ μΉν™”μ  ν¨ν„΄**: μµμ†ν•μ κ°„μ ‘ μ°Έμ΅°μ™€ μµμ μ λ©”λ¨λ¦¬ λ μ΄μ•„μ›ƒμΌλ΅ μΊμ‹ λ―Έμ¤ κ°μ† λ° μ„±λ¥ ν–¥μƒ
- **μ»΄νμΌ νƒ€μ„ μµμ ν™”**: ν•« ν¨μ¤μ— λ€ν• μ™„μ „ν• μΈλΌμ΄λ‹ μ μ¬λ ¥μΌλ΅ μ»΄νμΌλ¬κ°€ μ¶”μƒν™” κ²½κ³„λ¥Ό λ„μ–΄ μµμ ν™” κ°€λ¥

**μ„±λ¥ μν–¥:**
- ν…ν”λ¦Ώ μΈμ¤ν„΄μ¤ν™”λ” μ»΄νμΌ νƒ€μ„μ— λ°μƒν•λ©° λ°νƒ€μ„ μ¤λ²„ν—¤λ“ μ—†μ
- μ„±λ¥ μ¤‘μ” κ²½λ΅μ—μ„ κ°€μƒ ν•¨μ νΈμ¶ μ—†μ
- μ»΄νμΌλ¬κ°€ λ¨λ“  μ¶”μƒν™” λ μ΄μ–΄λ¥Ό ν†µν•΄ μµμ ν™” κ°€λ¥
- λ§ν¬ νƒ€μ„ μµμ ν™”(LTO)κ°€ λ¨λ“  μ¶”μƒν™” μ¤λ²„ν—¤λ“ μ κ±° κ°€λ¥

### π›΅οΈ **ν”„λ΅λ•μ… λ“±κΈ‰ μ‹ λΆ°μ„±**

common_systemμ λ¨λ“  μΈν„°νμ΄μ¤μ™€ ν¨ν„΄μ€ ν”„λ΅λ•μ… μ‹ λΆ°μ„±μ„ κ³ λ ¤ν•μ—¬ μ„¤κ³„λμ—μµλ‹λ‹¤:

- **νƒ€μ… μ•μ „ μΈν„°νμ΄μ¤**: μ»΄νμΌ νƒ€μ„μ— μ‹¤μλ¥Ό ν¬μ°©ν•μ—¬ μΌλ°μ μΈ λ°νƒ€μ„ μ¤λ¥ λ°©μ§€
  - ν…ν”λ¦Ώ μ μ•½μ΄ μ¬λ°”λ¥Έ μ‚¬μ© κ°•μ 
  - μ»΄νμΌ νƒ€μ„ κ²€μ‚¬κ°€ μ¤μ© λ°©μ§€
  - μ•μ „ν•μ§€ μ•μ€ μΊμ¤νΈλ‚ νƒ€μ… μ†κ±° μ—†μ

- **Result<T> ν¨ν„΄**: μμ™Έ μ—†μ΄ λ…μ‹μ  μ¤λ¥ μ²λ¦¬
  - νΈμ¶ μ‚¬μ΄νΈμ—μ„ μ¤λ¥ μ²λ¦¬ κ°•μ 
  - μμ™Έλ΅ μΈν• μ¨κ²¨μ§„ μ μ–΄ νλ¦„ μ—†μ
  - λ…ν™•ν• μ¤λ¥ μ „ν κ²½λ΅
  - μ¤λ¥κ°€ λ°μƒν•μ§€ μ•μ„ λ• μ λ΅ λΉ„μ©

- **RAII μ¤€μ**: ν‘μ¤€ ν¨ν„΄μ„ ν†µν• λ¦¬μ†μ¤ κ΄€λ¦¬
  - λ¨λ“  λ¦¬μ†μ¤κ°€ μ¤λ§νΈ ν¬μΈν„° μ‚¬μ©
  - μ¤μ½”ν”„ μΆ…λ£ μ‹ μλ™ μ •λ¦¬
  - μ„¤κ³„μƒ μμ™Έ μ•μ „
  - μλ™ λ©”λ¨λ¦¬ κ΄€λ¦¬ μ—†μ

- **μ¤λ λ“ μ•μ „ μ„¤κ³„**: λ¨λ“  μΈν„°νμ΄μ¤κ°€ λ™μ‹ μ‚¬μ©μ— μ•μ „
  - κ°€λ¥ν• κ²½μ° λ¶λ³€ νƒ€μ…
  - λ…ν™•ν• λ™μ‹μ„± λ³΄μ¥
  - μ μ ν• κ²½μ° λ½ν”„λ¦¬ μ•κ³ λ¦¬μ¦
  - μ„¤κ³„μƒ λ°μ΄ν„° λ μ΄μ¤ μ—†μ

### π”§ **κ°λ°μ μƒμ‚°μ„±**

Common_systemμ€ κ°λ°μ κ²½ν—κ³Ό μƒμ‚°μ„±μ„ μ°μ„ μ‹ν•©λ‹λ‹¤:

- **μμ²΄ λ¬Έμ„ν™” μΈν„°νμ΄μ¤**: ν¬κ΄„μ μΈ λ¬Έμ„μ™€ ν•¨κ» λ…ν™•ν• κ³„μ•½
  - ν‘ν„λ ¥ μλ” νƒ€μ… μ΄λ¦„
  - ν¬κ΄„μ μΈ Doxygen μ£Όμ„
  - ν—¤λ”μ μ‚¬μ© μμ 
  - λ…ν™•ν• μ¤λ¥ λ©”μ‹μ§€

- **μµμ† λ³΄μΌλ¬ν”λ μ΄νΈ**: κΉ”λ”ν• API μ„¤κ³„λ΅ μ½”λ“ μ¤λ²„ν—¤λ“ κ°μ†
  - μΌλ°μ μΈ ν¨ν„΄μ„ μ„ν• ν”λ£¨μ–ΈνΈ μΈν„°νμ΄μ¤
  - μ¥ν™©ν•¨μ„ μ¤„μ΄λ” νƒ€μ… μ¶”λ΅ 
  - ν•©λ¦¬μ μΈ κΈ°λ³Έκ°’
  - μΌλ°μ μΈ μ‚¬μ© μ‚¬λ΅€λ¥Ό μ„ν• ν—¬νΌ ν•¨μ

- **λ¨ν‚Ή κ°€λ¥ν• μ¶”μƒν™”**: μΈν„°νμ΄μ¤ μ£Όμ…μ„ ν†µν• μ‰¬μ΄ ν…μ¤ν…
  - μμ κ°€μƒ μΈν„°νμ΄μ¤
  - μμ΅΄μ„± μ£Όμ… μΉν™”μ 
  - λ¨μ κµ¬ν„ ν¬ν•¨
  - ν…μ¤νΈ ν—¬νΌ μ κ³µ

- **IDE μΉν™”μ **: μ™„μ „ν• IntelliSense λ° μλ™ μ™„μ„± μ§€μ›
  - μ™„μ „ν• νƒ€μ… μ •λ³΄
  - ν…ν”λ¦Ώ μΈμ¤ν„΄μ¤ν™” ννΈ
  - μ •μλ΅ μ΄λ™ μ‘λ™
  - λ¦¬ν©ν† λ§ λ„κµ¬ νΈν™

### π **λ²”μ© νΈν™μ„±**

λ¨λ“  ν„λ€ C++ ν™κ²½μ—μ„ μ‘λ™ν•λ„λ΅ μ„¤κ³„λμ—μµλ‹λ‹¤:

- **C++17 ν‘μ¤€**: λ” λ„“μ€ μ»΄νμΌλ¬ μ§€μ›μΌλ΅ ν•μ„ νΈν™μ„±
  - GCC 7+ (7, 9, 11, 13μ—μ„ ν…μ¤νΈλ¨)
  - Clang 5+ (5, 10, 14, 16μ—μ„ ν…μ¤νΈλ¨)
  - MSVC 2017+ (2017, 2019, 2022μ—μ„ ν…μ¤νΈλ¨)
  - μ»΄νμΌλ¬ νΉμ • ν™•μ¥ ν•„μ” μ—†μ

- **C++20 κΈ°λ¥**: μ‚¬μ© κ°€λ¥ν• κ²½μ° ν–¥μƒλ κΈ°λ¥μ„ μ„ν• μ„ νƒμ  μ§€μ›
  - λ” λ‚μ€ μ¤λ¥ μ§„λ‹¨μ„ μ„ν• `std::source_location`
  - λ” λ…ν™•ν• ν…ν”λ¦Ώ μ μ•½μ„ μ„ν• Concepts
  - C++17 λ“±κ°€λ¬Όλ΅μ μ°μ•„ν• ν΄λ°±

- **ν¬λ΅μ¤ ν”λ«νΌ**: μμ • μ—†μ΄ Windows, Linux, macOS
  - ν”λ«νΌμ— κµ¬μ• λ°›μ§€ μ•λ” μΈν„°νμ΄μ¤
  - ν—¤λ”μ— OS νΉμ • μ½”λ“ μ—†μ
  - ν”λ«νΌ κ°„ μΌκ΄€λ λ™μ‘
  - λ¨λ“  μ£Όμ” ν”λ«νΌμ—μ„ CI ν…μ¤ν…

- **λΉλ“ μ‹μ¤ν… λ…λ¦½**: λ¨λ“  λΉλ“ μ‹μ¤ν…κ³Ό μ‘λ™
  - CMake ν†µν•© μ κ³µ
  - Bazel μ§€μ› κ°€λ¥
  - μΌλ° Make νΈν™
  - ν—¤λ” μ „μ©μ΄λ―€λ΅ λΉλ“ ν•„μ” μ—†μ

### π“ **μ—”ν„°ν”„λΌμ΄μ¦ μ¤€λΉ„ κΈ°λ¥**

λ€κ·λ¨ μ—”ν„°ν”„λΌμ΄μ¦ λ°°ν¬λ¥Ό μ„ν•΄ κµ¬μ¶•λ¨:

- **μΈν„°νμ΄μ¤ λ²„μ „ κ΄€λ¦¬**: μ‹ μ¤‘ν• μ„¤κ³„λ¥Ό ν†µν• ν•μ„ νΈν™μ„±
  - μ»΄νμΌ νƒ€μ„μ— ABI λ²„μ „ κ²€μ‚¬
  - μΈν„°νμ΄μ¤μ μ‹λ§¨ν‹± λ²„μ „ κ΄€λ¦¬
  - μ΄μ „ APIμ— λ€ν• μ‚¬μ© μ¤‘λ‹¨ κ²½κ³ 
  - λ§μ΄κ·Έλ μ΄μ… κ°€μ΄λ“ μ κ³µ

- **μ¤‘μ•™ μ§‘μ¤‘μ‹ κµ¬μ„±**: λ¨λ“  λ¨λ“μ— κ±Έμ³ ν†µν•©λ λΉλ“ ν”λκ·Έ
  - μ„ νƒμ  μ»΄ν¬λ„νΈλ¥Ό μ„ν• κΈ°λ¥ ν”λκ·Έ
  - μΌκ΄€λ λΉλ“ κµ¬μ„±
  - μ‚¬μ©μ μ •μλ¥Ό μ„ν• μ¬μ •μ ν¬μΈνΈ
  - κµ¬μ„± μ ν¨μ„± κ²€μ‚¬

- **ν¬κ΄„μ μΈ ν…μ¤ν…**: μ—…κ³„ ν‘μ¤€ ν”„λ μ„μ›ν¬λ΅ μ™„μ „ν• ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€
  - Google Testλ΅ μ λ‹› ν…μ¤νΈ
  - μ‹¤μ  μ»΄ν¬λ„νΈλ΅ ν†µν•© ν…μ¤νΈ
  - μ„±λ¥ κ²€μ¦μ„ μ„ν• λ²¤μΉλ§ν¬ ν…μ¤νΈ
  - μƒλ‹νƒ€μ΄μ € μ»¤λ²„λ¦¬μ§€ (ASan, TSan, UBSan)

---

## ν•µμ‹¬ μ»΄ν¬λ„νΈ

### IExecutor μΈν„°νμ΄μ¤

IExecutor μΈν„°νμ΄μ¤λ” νƒμ¤ν¬ μ‹¤ν–‰μ„ μ„ν• λ²”μ© μ¶”μƒν™”λ¥Ό μ κ³µν•μ—¬ νΉμ • μ¤λ λ”© κµ¬ν„μΌλ΅λ¶€ν„° μ™„μ „ν• λ…λ¦½μ„±μ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤.

**μ£Όμ” κΈ°λ¥:**

- **μ¤λ λ”© λ°±μ—”λ“ λ…λ¦½μ„±**: ν• λ² μ‘μ„±ν•κ³  λ¨λ“  μ‹¤ν–‰κΈ°μ—μ„ μ‹¤ν–‰
- **νƒμ¤ν¬ κΈ°λ° μ¶”μƒν™”**: λλ‹¤ ν•¨μ, ν•¨μ κ°μ²΄ λλ” std::function μ μ¶
- **Future κΈ°λ° κ²°κ³Ό**: std::future<T>λ¥Ό ν†µν• νƒ€μ… μ•μ „ λΉ„λ™κΈ° κ²°κ³Ό
- **μμ™Έ μ•μ „μ„±**: futureλ¥Ό ν†µν•΄ μμ™Έ μ „ν
- **μλ… κ΄€λ¦¬**: RAIIλ¥Ό ν†µν• μλ™ μ •λ¦¬

**μΈν„°νμ΄μ¤ λ©”μ„λ“:**

```cpp
namespace kcenon::common::interfaces {
    class IExecutor {
    public:
        virtual ~IExecutor() = default;

        // νƒμ¤ν¬λ¥Ό μ μ¶ν•κ³  κ²°κ³Όμ— λ€ν• future λ°ν™
        template<typename F, typename... Args>
        auto submit(F&& func, Args&&... args)
            -> std::future<std::invoke_result_t<F, Args...>>;

        // κ²°κ³Ό λ°ν™ μ—†μ΄ νƒμ¤ν¬ μ‹¤ν–‰
        template<typename F, typename... Args>
        void execute(F&& func, Args&&... args);

        // μ‹¤ν–‰κΈ° μ •λ³΄ μ΅°ν
        virtual size_t thread_count() const = 0;
        virtual bool is_running() const = 0;
    };
}
```

**μ‚¬μ© ν¨ν„΄:**

1. **Fire and forget μ‹¤ν–‰**:
```cpp
executor->execute([]() {
    // λ°±κ·ΈλΌμ΄λ“ νƒμ¤ν¬
    process_data();
});
```

2. **κ²°κ³Όκ°€ μλ” λΉ„λ™κΈ°**:
```cpp
auto future = executor->submit([]() {
    return compute_value();
});
auto result = future.get();
```

3. **λΉ„λ™κΈ° μ‘μ—… μ²΄μ΄λ‹**:
```cpp
auto future1 = executor->submit(load_data);
auto future2 = executor->submit([future1 = std::move(future1)]() mutable {
    auto data = future1.get();
    return process(data);
});
```

**ν†µν•©:**

IExecutor μΈν„°νμ΄μ¤λ” λ‹¤μμ— μν•΄ κµ¬ν„λ©λ‹λ‹¤:
- μ–΄λ‘ν„° ν¨ν„΄μ„ ν†µν• `thread_system::thread_pool`
- λΉ„λ™κΈ° I/O μ‘μ—…μ„ μ„ν• `network_system`
- νΉμ μ‹¤ν–‰κΈ°λ¥Ό μ„ν• μ»¤μ¤ν…€ κµ¬ν„

### Result<T> ν¨ν„΄

μμ™Έ μ—†μ΄ νƒ€μ… μ•μ „ μ¤λ¥ μ²λ¦¬λ¥Ό μ„ν• Result λ¨λ‚λ“ ν¨ν„΄μ ν¬κ΄„μ μΈ κµ¬ν„μ…λ‹λ‹¤.

**μ„¤κ³„ μ² ν•™:**

- λ¨λ“  νΈμ¶ μ‚¬μ΄νΈμ—μ„ λ…μ‹μ  μ¤λ¥ μ²λ¦¬
- μμ™Έλ΅ μΈν• μ¨κ²¨μ§„ μ μ–΄ νλ¦„ μ—†μ
- λ¨λ‚λ”• μ—°μ‚°μ„ ν†µν• ν•¨μν• ν•©μ„±
- μ„±κ³µ μ‹ μ λ΅ μ¤λ²„ν—¤λ“
- μ»΄νμΌ νƒ€μ„μ— μ™„μ „ν• νƒ€μ… μ•μ „μ„±

**ν•µμ‹¬ μ—°μ‚°:**

```cpp
namespace kcenon::common {
    template<typename T>
    class Result {
    public:
        // ν©ν† λ¦¬ λ©”μ„λ“
        static Result<T> ok(T value);
        static Result<T> error(ErrorInfo info);

        // μƒνƒ μΏΌλ¦¬
        bool is_ok() const noexcept;
        bool is_error() const noexcept;
        explicit operator bool() const noexcept;

        // κ°’ μ ‘κ·Ό (μ¤λ¥ μ‹ throw)
        T& value() &;
        const T& value() const &;
        T&& value() &&;

        // κ°’ λλ” κΈ°λ³Έκ°’ μ ‘κ·Ό
        T value_or(T&& default_value) const&;
        T value_or(T&& default_value) &&;

        // μ¤λ¥ μ ‘κ·Ό
        const ErrorInfo& error() const;

        // λ¨λ‚λ”• μ—°μ‚°
        template<typename F>
        auto map(F&& func) const& -> Result<std::invoke_result_t<F, const T&>>;

        template<typename F>
        auto and_then(F&& func) const& -> std::invoke_result_t<F, const T&>;

        template<typename F>
        auto or_else(F&& func) const& -> Result<T>;
    };
}
```

**λ¨λ‚λ”• ν•©μ„±:**

Result<T> ν¨ν„΄μ€ ν•¨μν• ν”„λ΅κ·Έλλ° ν¨λ¬λ‹¤μ„μ„ μ§€μ›ν•©λ‹λ‹¤:

```cpp
// Map: μ„±κ³µ κ°’ λ³€ν™
auto result = load_config("app.conf")
    .map([](const Config& cfg) {
        return cfg.with_defaults();
    });

// AndThen: Resultλ¥Ό λ°ν™ν•λ” μ‘μ—… μ²΄μ΄λ‹
auto result = load_config("app.conf")
    .and_then(validate_config)
    .and_then(apply_schema);

// OrElse: μ¤λ¥ μ‹ ν΄λ°± μ κ³µ
auto result = load_config("app.conf")
    .or_else([](const ErrorInfo& err) {
        log_error(err);
        return load_default_config();
    });

// μ „μ²΄ ν•©μ„±
auto result = load_config("app.conf")
    .and_then(validate_config)
    .map(apply_defaults)
    .and_then(connect_to_db)
    .or_else(use_fallback_db);
```

**μ¤λ¥ μ»¨ν…μ¤νΈ:**

ν’λ¶€ν• μ¤λ¥ μ •λ³΄ ν¬ν•¨:

```cpp
struct ErrorInfo {
    int code;                    // λ μ§€μ¤νΈλ¦¬μ μ¤λ¥ μ½”λ“
    std::string message;         // μ‚¬λμ΄ μ½μ„ μ μλ” λ©”μ‹μ§€
    std::string source;          // μ†μ¤ λ¨λ“/ν•¨μ
    std::string file;            // μ†μ¤ νμΌ (κ°€λ¥ν• κ²½μ°)
    int line;                    // μ†μ¤ λΌμΈ (κ°€λ¥ν• κ²½μ°)
    std::optional<std::string>
        additional_context;      // μ¶”κ°€ μ»¨ν…μ¤νΈ
};
```

---

## ν†µν•© κΈ°λ¥

### thread_systemκ³Όμ ν†µν•©

common_system μΈν„°νμ΄μ¤μ™€ thread_systemμ„ μ‚¬μ©ν•κΈ° μ„ν• μ™„μ „ν• ν†µν•© μμ :

```cpp
#include <kcenon/thread/core/thread_pool.h>
#include <kcenon/thread/adapters/common_executor_adapter.h>

// μ¤λ λ“ ν’€ μƒμ„±
auto thread_pool = std::make_shared<kcenon::thread::thread_pool>(
    4  // μ›μ»¤ μ¤λ λ“
);

// common IExecutor μΈν„°νμ΄μ¤λ΅ μ μ‘
auto executor = kcenon::thread::adapters::make_common_executor(thread_pool);

// μ΄μ  λ¨λ“  IExecutor κΈ°λ° APIμ™€ ν•¨κ» μ‚¬μ©
void process_with_executor(std::shared_ptr<common::interfaces::IExecutor> exec) {
    auto future = exec->submit([]() {
        return compute_expensive_operation();
    });

    // κ³„μ‚°μ΄ μ‹¤ν–‰λλ” λ™μ• λ‹¤λ¥Έ μ‘μ—… μν–‰...

    auto result = future.get();
}

process_with_executor(executor);
```

### network_systemκ³Όμ ν†µν•©

common executor μ¶”μƒν™”λ¥Ό μ‚¬μ©ν• λ„¤νΈμ›ν¬ μ‘μ—…:

```cpp
#include <network_system/integration/executor_adapter.h>
#include <network_system/server.h>

void setup_network(std::shared_ptr<common::interfaces::IExecutor> executor) {
    // common executorλ¥Ό λ„¤νΈμ›ν¬ μ‹μ¤ν…μ μ¤λ λ“ ν’€ μΈν„°νμ΄μ¤λ΅ μ μ‘
    auto network_pool = kcenon::network::integration::make_thread_pool_adapter(executor);

    // μ μ‘λ executorλ΅ μ„λ²„ μƒμ„±
    network_system::server server(network_pool);

    // λ¨λ“  λ„¤νΈμ›ν¬ μ‘μ—…μ΄ μ΄μ  common executor μ‚¬μ©
    server.listen(8080);
}
```

### logger_systemκ³Όμ ν†µν•©

μ¤λ¥ μ²λ¦¬ ν†µν•©:

```cpp
#include <kcenon/logger/logger.h>
#include <kcenon/common/patterns/result.h>

common::Result<void> initialize_logging(const std::string& log_path) {
    try {
        auto logger = kcenon::logger::create_logger(log_path);

        if (!logger) {
            return common::make_error<void>(
                common::error_codes::INITIALIZATION_FAILED,
                "λ΅κ±° μƒμ„± μ‹¤ν¨",
                "initialize_logging"
            );
        }

        return common::ok();

    } catch (const std::exception& e) {
        return common::make_error<void>(
            common::error_codes::EXCEPTION,
            e.what(),
            "initialize_logging"
        );
    }
}

// μ‚¬μ©
auto result = initialize_logging("/var/log/app.log");
if (!result) {
    std::cerr << "λ΅κΉ… μ΄κΈ°ν™” μ‹¤ν¨: "
              << result.error().message << "\n";
    return 1;
}
```

### μ—μ½”μ‹μ¤ν… ν†µν•© ν”λκ·Έ

μ—μ½”μ‹μ¤ν… λ¨λ“κ³Όμ μ μ—°ν• ν†µν•©μ„ μ„ν•΄:

**μ‚¬μ© κ°€λ¥ν• ν”λκ·Έ:**

- `BUILD_WITH_THREAD_SYSTEM`: thread_system ν†µν•© ν™μ„±ν™”
- `BUILD_WITH_CONTAINER_SYSTEM`: container_system ν†µν•© ν™μ„±ν™”
- `BUILD_WITH_LOGGER_SYSTEM`: logger_system ν†µν•© ν™μ„±ν™”
- `BUILD_WITH_MONITORING_SYSTEM`: monitoring_system ν†µν•© ν™μ„±ν™”
- `BUILD_WITH_NETWORK_SYSTEM`: network_system ν†µν•© ν™μ„±ν™”
- `DATABASE_USE_COMMON_SYSTEM`: database_systemμ—μ„ Result<T> λνΌ ν™μ„±ν™”

**CMake μ‚¬μ©:**

```cmake
# ν†µν•© ν™μ„±ν™”
set(BUILD_WITH_THREAD_SYSTEM ON)
set(BUILD_WITH_LOGGER_SYSTEM ON)
set(DATABASE_USE_COMMON_SYSTEM ON)

# λ¨λ“ μ¶”κ°€
add_subdirectory(common_system)
add_subdirectory(thread_system)
add_subdirectory(logger_system)
add_subdirectory(database_system)

# νƒ€κ²μ— λ§ν¬
target_link_libraries(my_app
    PRIVATE
        kcenon::common
        kcenon::thread
        kcenon::logger
        kcenon::database
)
```

---

## ν”„λ΅λ•μ… ν’μ§ κΈ°λ¥

### λΉλ“ λ° ν…μ¤ν… μΈν”„λΌ

**λ©€ν‹° ν”λ«νΌ μ§€μ†μ  ν†µν•©:**

common_systemμ€ μ—¬λ¬ ν”λ«νΌκ³Ό μ»΄νμΌλ¬μ—μ„ μ§€μ†μ μΌλ΅ ν…μ¤νΈλ©λ‹λ‹¤:

- **Ubuntu Linux**
  - GCC 7, 9, 11, 13
  - Clang 5, 10, 14, 16
  - μ™„μ „ν• μƒλ‹νƒ€μ΄μ € μ»¤λ²„λ¦¬μ§€

- **macOS**
  - Apple Clang (Xcode 12, 13, 14, 15)
  - arm64 λ° x86_64 μ•„ν‚¤ν…μ²
  - λ„¤μ΄ν‹°λΈ M1/M2 ν…μ¤ν…

- **Windows**
  - MSVC 2017, 2019, 2022
  - x86 λ° x64 λΉλ“ λ¨λ‘
  - Debug λ° Release κµ¬μ„±

**μλ™ν™”λ μƒλ‹νƒ€μ΄μ € λΉλ“:**

λ¨λ“  μ»¤λ°‹μ€ λ‹¤μμΌλ΅ ν…μ¤νΈλ©λ‹λ‹¤:
- **ThreadSanitizer (TSan)**: λ°μ΄ν„° λ μ΄μ¤ λ° μ¤λ λ”© λ¬Έμ  κ°μ§€
- **AddressSanitizer (ASan)**: λ©”λ¨λ¦¬ μ¤λ¥ λ° λ„μ κ°μ§€
- **UndefinedBehaviorSanitizer (UBSan)**: μ •μλμ§€ μ•μ€ λ™μ‘ ν¬μ°©

**ν’μ§ λ©”νΈλ¦­:**

ν„μ¬ ν”„λ΅λ•μ… ν’μ§ λ©”νΈλ¦­:
- ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€: 80%+ (λ©ν‘: 85%)
- μƒλ‹νƒ€μ΄μ € ν…μ¤νΈ: 18/18 μ λ΅ κ²½κ³ λ΅ ν†µκ³Ό
- μ •μ  λ¶„μ„: λ² μ΄μ¤λΌμΈ μλ¦½, μƒλ΅μ΄ κ²½κ³  μ λ΅
- λ¬Έμ„ μ»¤λ²„λ¦¬μ§€: κ³µκ° APIμ 100%

### μ¤λ λ“ μ•μ „μ„± λ° λ™μ‹μ„±

**μ„¤κ³„μƒ μ¤λ λ“ μ•μ „:**

λ¨λ“  common_system μΈν„°νμ΄μ¤λ” μ•μ „ν• λ™μ‹ μ ‘κ·Όμ„ μ„ν•΄ μ„¤κ³„λμ—μµλ‹λ‹¤:

- **Result<T>**: μƒμ„± ν›„ λ¶λ³€, μ¤λ λ“ κ°„ κ³µμ  μ•μ „
- **IExecutor**: μ¤λ λ“ μ•μ „ submit() λ° execute() μ—°μ‚°
- **μ΄λ²¤νΈ λ²„μ¤**: λ½ν”„λ¦¬ κ²μ‹/κµ¬λ… μ—°μ‚°
- **μ¤λ¥ λ μ§€μ¤νΈλ¦¬**: μ»΄νμΌ νƒ€μ„ μ΄κΈ°ν™”, λ°νƒ€μ„ μ½κΈ° μ „μ©

**λ™μ‹μ„± λ³΄μ¥:**

```cpp
// μ•μ „ν• λ™μ‹ Result<T> μ‚¬μ©
void worker_thread(std::shared_ptr<Result<Data>> result) {
    // μ—¬λ¬ μ¤λ λ“κ°€ λ™μΌν• Resultλ¥Ό μ•μ „ν•κ² μ½μ„ μ μμ
    if (result->is_ok()) {
        process(result->value());
    }
}

// μ•μ „ν• λ™μ‹ IExecutor μ‚¬μ©
void process_batch(std::shared_ptr<IExecutor> executor,
                  const std::vector<Task>& tasks) {
    // μ—¬λ¬ μ¤λ λ“κ°€ λ™μΌν• μ‹¤ν–‰κΈ°μ— μ μ¶ κ°€λ¥
    for (const auto& task : tasks) {
        executor->submit([task]() {
            task.execute();
        });
    }
}
```

**κ²€μ¦:**

- λ¨λ“  μ—μ½”μ‹μ¤ν… μ»΄ν¬λ„νΈμ—μ„ ThreadSanitizer μ¤€μ ν™•μΈ
- ν”„λ΅λ•μ… μ‚¬μ©μ—μ„ μ λ΅ λ°μ΄ν„° λ μ΄μ¤ κ²½κ³ 
- ν¬κ΄„μ μΈ λ™μ‹μ„± κ³„μ•½ λ¬Έμ„
- λ¨λ“  κ³µμ  μƒνƒμ— λ€ν• μ μ ν• λ™κΈ°ν™”

### λ¦¬μ†μ¤ κ΄€λ¦¬ (RAII - Aλ“±κΈ‰)

**μ™„λ²½ν• RAII μ¤€μ:**

common_systemμ λ¨λ“  λ¦¬μ†μ¤λ” RAII μ›μΉ™μ„ λ”°λ¦…λ‹λ‹¤:

- μ¤λ§νΈ ν¬μΈν„°(`std::shared_ptr`, `std::unique_ptr`)λ¥Ό ν†µν•΄ λ¨λ“  λ¦¬μ†μ¤ κ΄€λ¦¬
- μ½”λ“λ² μ΄μ¤ μ–΄λ””μ—μ„λ„ μλ™ λ©”λ¨λ¦¬ κ΄€λ¦¬ μ—†μ
- μ¤μ½”ν”„ μΆ…λ£ μ‹ μλ™ μ •λ¦¬
- μ„¤κ³„μƒ μμ™Έ μ•μ „

**κ²€μ¦ κ²°κ³Ό:**

- AddressSanitizer: μ λ΅ λ©”λ¨λ¦¬ λ„μλ΅ 18/18 ν…μ¤νΈ ν†µκ³Ό
- λ¨λ“  μ¤λ¥ κ²½λ΅μ—μ„ λ¦¬μ†μ¤ μ •λ¦¬ ν™•μΈ
- ν”„λ΅λ•μ… μ‚¬μ©μ—μ„ λ¦¬μ†μ¤ λ„μ κ°μ§€λμ§€ μ•μ
- λ¨λ“  μ—°μ‚°μ—μ„ μμ™Έ μ•μ „μ„± κ²€μ¦

---

## μ¤λ¥ μ²λ¦¬ κΈ°λ°

common_systemμ€ μ—μ½”μ‹μ¤ν…μ λ¨λ“  μ‹μ¤ν…μ— κ±Έμ³ μ¤λ¥ μ²λ¦¬λ¥Ό μ„ν• **κΈ°λ° μ κ³µμ** μ—­ν• μ„ ν•©λ‹λ‹¤.

### μ¤‘μ•™ μ§‘μ¤‘μ‹ μ¤λ¥ μ½”λ“ λ μ§€μ¤νΈλ¦¬

μ‹μ¤ν…λ³„ λ²”μ„λ¥Ό μ κ³µν•λ” μ™„μ „ν• μ¤λ¥ μ½”λ“ λ μ§€μ¤νΈλ¦¬:

| μ‹μ¤ν… | μ¤λ¥ μ½”λ“ λ²”μ„ | λ©μ  |
|--------|-----------------|---------|
| common_system | -1 ~ -99 | κΈ°λ° μ¤λ¥ (κ²€μ¦, μ΄κΈ°ν™”) |
| thread_system | -100 ~ -199 | μ¤λ λ”© μ¤λ¥ (κµμ°© μƒνƒ, ν’€ κ³ κ°) |
| logger_system | -200 ~ -299 | λ΅κΉ… μ¤λ¥ (νμΌ I/O, ν¬λ§·ν…) |
| monitoring_system | -300 ~ -399 | λ¨λ‹ν„°λ§ μ¤λ¥ (λ©”νΈλ¦­ μμ§‘, κ²μ‹) |
| container_system | -400 ~ -499 | μ»¨ν…μ΄λ„ μ¤λ¥ (μ§λ ¬ν™”, κ²€μ¦) |
| database_system | -500 ~ -599 | λ°μ΄ν„°λ² μ΄μ¤ μ¤λ¥ (μ—°κ²°, μΏΌλ¦¬, νΈλμ­μ…) |
| network_system | -600 ~ -699 | λ„¤νΈμ›ν¬ μ¤λ¥ (μ—°κ²°, νƒ€μ„μ•„μ›ƒ, ν”„λ΅ν† μ½) |

**μ»΄νμΌ νƒ€μ„ κ²€μ¦:**

μ¤λ¥ μ½”λ“ λ²”μ„λ” μ¶©λμ„ λ°©μ§€ν•κΈ° μ„ν•΄ μ»΄νμΌ νƒ€μ„μ— κ°•μ λ©λ‹λ‹¤:

```cpp
namespace common::error_codes {
    // μ»΄νμΌ νƒ€μ„ λ²”μ„ κ²€μ‚¬
    constexpr int COMMON_MIN = -1;
    constexpr int COMMON_MAX = -99;

    constexpr bool is_valid_common_code(int code) {
        return code >= COMMON_MIN && code <= COMMON_MAX;
    }

    static_assert(is_valid_common_code(NOT_FOUND));
    static_assert(is_valid_common_code(INVALID_ARGUMENT));
}
```

### μ—μ½”μ‹μ¤ν… μ±„νƒ

λ¨λ“  μμ΅΄ μ‹μ¤ν…μ΄ Result<T> ν¨ν„΄κ³Ό μ¤λ¥ μ½”λ“ λ μ§€μ¤νΈλ¦¬λ¥Ό μ„±κ³µμ μΌλ΅ μ±„νƒν–μµλ‹λ‹¤:

**μ±„νƒ μƒνƒ:**

- β… thread_system: λ¨λ“  μ—°μ‚°μ— λ€ν• μ™„μ „ν• Result<T> ν†µν•©
- β… logger_system: Result<T>λ¥Ό ν†µν• μ¤λ¥ μ²λ¦¬, μμ™Έ μ—†μ
- β… monitoring_system: λ©”νΈλ¦­ μ—°μ‚°μ— Result<T>
- β… container_system: μ§λ ¬ν™” μ—°μ‚°μ΄ Result<T> λ°ν™
- β… database_system: μΏΌλ¦¬ κ²°κ³Ό λ° νΈλμ­μ…μ΄ Result<T> μ‚¬μ©
- β… network_system: μ—°κ²° λ° I/O μ—°μ‚°μ΄ Result<T> λ°ν™

**μ‹¤ν„λ μ΄μ :**

- λ¨λ“  μ‹μ¤ν…μ—μ„ μΌκ΄€λ μ¤λ¥ μ²λ¦¬
- ν”„λ΅λ•μ…μ—μ„ μκΈ°μΉ μ•μ€ μμ™Έ μ—†μ
- λ…ν™•ν• μ¤λ¥ μ „ν κ²½λ΅
- κ°μ„ λ μ¤λ¥ λ³µκµ¬ λ° λ³µμ›λ ¥
- λ” λ‚μ€ μ¤λ¥ λ΅κΉ… λ° μ§„λ‹¨

---

**μµμΆ… μ—…λ°μ΄νΈ**: 2025-11-28
**λ²„μ „**: 1.0

---

Made with β¤οΈ by π€β€π•π¥ π
